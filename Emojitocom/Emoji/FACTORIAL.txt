JMP :PROGRAM

:FACTORIAL
PUSH AX
PUSH BX

PUSH AX
POP [30]
PUSH BX
POP [31]
MUL
PUSH [31]
POP BX
PUSH [30]
POP AX

POP BX
PUSH AX
PUSH 1

PUSH AX
POP [30]
PUSH BX
POP [31]
SUB
PUSH [31]
POP BX
PUSH [30]
POP AX

POP AX

PUSH AX
PUSH 0

PUSH AX
POP [30]
PUSH BX
POP [31]
JE :REQ
PUSH [31]
POP BX
PUSH [30]
POP AX

CALL :FACTORIAL
:REQ
PUSH [31]
POP BX
PUSH [30]
POP AX
REV

:PROGRAM
IN
POP AX
PUSH 1
POP BX
CALL :FACTORIAL
PUSH BX
OUT
END
